#ifndef SWITCH_HID_DESCRIPTOR_H
#define SWITCH_HID_DESCRIPTOR_H

#include <stdint.h>

#define SWITCH_REPORT_ID 0x01

static const uint8_t switch_hid_report_descriptor[] = {
    0x05, 0x01,        // Usage Page (Generic Desktop)
    0x09, 0x04,        // Usage (Joystick)
    0xA1, 0x01,        // Collection (Application)

      0x85, SWITCH_REPORT_ID,  // Report ID

      // Buttons (16)
      0x05, 0x09,
      0x19, 0x01,
      0x29, 0x10,
      0x15, 0x00,
      0x25, 0x01,
      0x75, 0x01,
      0x95, 0x10,
      0x81, 0x02,

      // Hat switch
      0x05, 0x01,
      0x09, 0x39,
      0x15, 0x00,
      0x25, 0x07,
      0x35, 0x00,
      0x46, 0x3B, 0x01,
      0x65, 0x14,
      0x75, 0x04,
      0x95, 0x01,
      0x81, 0x02,

      // Padding 4 bits
      0x75, 0x04,
      0x95, 0x01,
      0x81, 0x03,

      // Left stick X/Y
      0x05, 0x01,
      0x09, 0x30,
      0x09, 0x31,
      0x15, 0x00,
      0x26, 0xFF, 0x00,
      0x75, 0x08,
      0x95, 0x02,
      0x81, 0x02,

      // Right stick X/Y
      0x09, 0x33,
      0x09, 0x34,
      0x15, 0x00,
      0x26, 0xFF, 0x00,
      0x75, 0x08,
      0x95, 0x02,
      0x81, 0x02,

      // L/R analog triggers
      0x09, 0x35,
      0x09, 0x36,
      0x15, 0x00,
      0x26, 0xFF, 0x00,
      0x75, 0x08,
      0x95, 0x02,
      0x81, 0x02,

    0xC0
};

#pragma pack(push,1)
typedef struct {
    uint8_t  report_id;
    uint16_t buttons;
    uint8_t  hat;
    uint8_t  lx, ly;
    uint8_t  rx, ry;
    uint8_t  lt, rt;
} switch_hid_report_t;
#pragma pack(pop)

#endif
